# eToro Terminal (US)

[![Version](https://img.shields.io/badge/version-1.1.7-blue.svg)](https://github.com/yourusername/etoro-terminal)
[![License](https://img.shields.io/badge/license-MIT-green.svg)](LICENSE)
[![Node](https://img.shields.io/badge/node-%3E%3D18.0.0-brightgreen.svg)](https://nodejs.org)

A Bloomberg-style terminal interface for eToro, built with React and TypeScript. Designed for pro/active traders who want keyboard-first, high-density workflows.

![Terminal Screenshot](docs/assets/terminal-screenshot.png)

## Features

- **18 Functional Panels** - Quote tile, watchlists, portfolio, trading, charts, alerts, asset explorer, activity log, and more
- **Real-time Quotes** - REST polling with WebSocket fallback for live market data
- **Command Bar** - Bloomberg-style navigation (`AAPL QT`, `WL`, `PF`, `TRD`)
- **Demo/Real Mode** - Safe trading with explicit confirmation for real trades
- **Keyboard-first** - Pro-trader workflows without mouse dependency
- **Symbol Universe** - 10,800+ pre-cached instruments for instant lookups
- **Draggable Panels** - Drag and drop to reorder panels in your workspace
- **Save/Load Layout** - Save your panel configuration as default for next session
- **Asset Explorer** - Browse entire universe by exchange, type, or search
- **Symbol Autocomplete** - Smart suggestions when typing in Quote panel
- **Panel Linking** - Click watchlist/explorer items to load in Quote panel
- **Quick Trade** - Click BUY/SELL buttons on Quote panel to open Trade Ticket
- **Activity Log** - See trade executions with Demo/Real labels and P&L

## Quick Start

```bash
# Clone the repository
git clone https://github.com/yourusername/etoro-terminal.git
cd etoro-terminal

# Install dependencies
npm install

# Start development server
npm run dev
```

Open http://localhost:3005 and enter your eToro API keys.

## Getting API Keys

1. Log in to your eToro account
2. Navigate to https://www.etoro.com/settings/trade
3. Generate your API keys (Public Key + User Key)

## Default Panels

On login, these panels open automatically:

| Panel | Code | Description |
|-------|------|-------------|
| Connection Status | `STATUS` | API health check |
| Watchlists | `WL` | Manage watchlists |
| Watchlist Monitor | `WLM` | Live quotes for symbols |
| Portfolio | `PF` | Your positions with P&L |
| Quote Tile | `QT` | Single symbol quote |
| Chart | `CH` | Price chart |
| Blotter | `ORD` | Order history |

## All Function Codes

Type these in the command bar:

| Code | Panel | Code | Panel |
|------|-------|------|-------|
| `QT` | Quote Tile | `WL` | Watchlists |
| `WLM` | Watchlist Monitor | `PF` | Portfolio |
| `TRD` | Trade Ticket | `ORD` | Blotter |
| `CH` | Chart | `AL` | Alerts |
| `PI` | Trader Search | `PIP` | Trader Profile |
| `CUR` | Curated Lists | `REC` | Recommendations |
| `FEED` | Social Feed | `API` | API Tester |
| `HELP` | Help | `STATUS` | Connection Status |
| `EXP` | Asset Explorer | `ACT` | Activity Log |

## Keyboard Shortcuts

| Shortcut | Action |
|----------|--------|
| `/` or `Ctrl+K` | Focus command bar |
| `Escape` | Close current panel / Cancel |
| `Enter` | Execute command / Confirm |
| `Tab` | Navigate between panels |
| `Ctrl+1-9` | Quick switch to panel |

See [Keyboard Shortcuts Guide](docs/KEYBOARD-SHORTCUTS.md) for full list.

## API Configuration

The terminal uses the eToro Public API:

**Base URL:** `https://public-api.etoro.com`

**Required Headers:**
```
x-api-key: <your_public_key>
x-user-key: <your_user_key>
x-request-id: <auto-generated-uuid>
```

See [API Contract](docs/API-CONTRACT.md) for endpoint details.

## Scripts

```bash
npm run dev              # Start dev server (port 3005)
npm run build            # Production build
npm run preview          # Preview production build
npm run ralph <pk> <uk>  # Run automated test suite (18 tests)
npm run test:api <pk> <uk>  # Quick API connectivity test

# Electron (Desktop App)
npm run electron:dev     # Run as desktop app (dev)
npm run electron:build   # Build desktop installer
```

## Project Structure

```
src/
├── api/                 # REST adapters & endpoint contracts
│   ├── adapters/        # API endpoint adapters
│   └── endpoints.ts     # Endpoint definitions
├── components/
│   ├── panels/          # 16 panel components
│   ├── CommandBar.tsx   # Bloomberg-style command input
│   ├── Header.tsx       # Top bar with user info
│   └── Workspace.tsx    # Panel layout manager
├── contexts/            # React contexts (Workspace, Trading Mode)
├── data/
│   └── symbolUniverse.json  # 10,800+ cached instruments
├── services/
│   ├── etoroApi.ts      # Core API client
│   ├── keyManager.ts    # Secure key storage
│   ├── symbolResolver.ts    # Symbol → instrumentId resolution
│   ├── quotesPollingService.ts  # REST-based quote updates
│   └── websocketService.ts  # WebSocket client
├── stores/              # State management (Zustand-style)
└── utils/               # Helpers and utilities

scripts/
├── ralph.mjs            # Automated test suite
└── quickApiTest.mjs     # API endpoint tests

docs/
├── API-CONTRACT.md      # API endpoint documentation
├── KEYBOARD-SHORTCUTS.md    # Accessibility guide
├── TESTING.md           # Test cases & procedures
├── PERFORMANCE.md       # Performance benchmarks
└── SPECKIT_ADDENDUM_v1.1.0.md  # Implementation status
```

## Tech Stack

| Category | Technology |
|----------|------------|
| Frontend | React 18, TypeScript |
| Build | Vite 7 |
| Desktop | Electron 35 |
| State | Custom Zustand-style stores |
| Streaming | REST polling + WebSocket |
| Bundle Size | 334 KB JS (95 KB gzipped) |

## Development

### Prerequisites

- Node.js >= 18.0.0
- npm >= 9.0.0

### Environment Setup

The public key is included by default in `.env` (not sensitive).

You only need to add your **user key** (keep this private):

```bash
# The .env file already contains the public key
# Just add your user key (or enter it in the login screen)

# Edit .env and add your user key:
VITE_ETORO_USER_KEY=your_user_key_here
```

**Note:** The user key can also be entered directly in the login screen.

### Running Tests

```bash
# Full automated test suite
npm run ralph <publicKey> <userKey>

# Quick API test
npm run test:api <publicKey> <userKey>
```

### Building for Production

```bash
# Web build
npm run build

# Desktop build (Windows/Mac/Linux)
npm run electron:build
```

## Documentation

- [SpecKit Master Document](eToroTerminalSpecKit.MD) - Full specification
- [Implementation Addendum](docs/SPECKIT_ADDENDUM_v1.1.0.md) - API contracts & status
- [Testing Guide](docs/TESTING.md) - 100+ test cases
- [Keyboard Shortcuts](docs/KEYBOARD-SHORTCUTS.md) - Accessibility guide
- [API Contract](docs/API-CONTRACT.md) - Endpoint documentation
- [Changelog v1.1.7](docs/CHANGELOG_v1.1.7.md) - Latest version history
- [Changelog v1.1.6](docs/CHANGELOG_v1.1.6.md) - Previous version

## Version History

### v1.1.7 (2026-01-20)
- Activity Log panel (ACT) - shows trade executions with Demo/Real labels
- Trade notifications with profit/loss display
- Fixed connection status to show REST API status (working) vs WebSocket (optional)
- 18 panels total

### v1.1.6 (2026-01-20)
- Panel linking: click watchlist/explorer items to load in Quote panel
- Quick trade: click BUY/SELL on Quote panel to open Trade Ticket
- Improved panel grid layout with flex-wrap for better drag/drop
- Active symbol context synchronization across panels

### v1.1.5 (2026-01-20)
- Asset Explorer panel (EXP) - browse 10,800+ instruments by exchange/type
- Symbol autocomplete in Quote panel from cached universe
- Fixed double scrollbar in Watchlist Monitor
- 17 panels total

### v1.1.4 (2026-01-20)
- Draggable panel reordering with visual feedback
- Save/Load workspace layout to localStorage
- Reset to factory defaults option
- RALPH test suite updated (19 tests)

### v1.1.3 (2026-01-20)
- Symbol universe cache (10,800+ instruments)
- Watchlist API fixes (itemId/itemRank parsing)
- User info display from JWT
- Network binding for LAN access

### v1.1.2 (2026-01-20)
- API key propagation fix
- REST quotes polling service
- Enriched instrument name display
- RALPH test suite enhancements

### v1.1.0 (2026-01-20)
- All 16 panels implemented
- WebSocket streaming for quotes
- Demo/Real mode switching
- RALPH automated test suite

### v1.0.0 (2026-01-19)
- Initial specification

See [Full Changelog](docs/CHANGELOG_v1.1.3.md) for details.

## Contributing

1. Fork the repository
2. Create a feature branch (`git checkout -b feature/amazing-feature`)
3. Commit your changes (`git commit -m 'Add amazing feature'`)
4. Push to the branch (`git push origin feature/amazing-feature`)
5. Open a Pull Request

See [CONTRIBUTING.md](CONTRIBUTING.md) for detailed guidelines.

## Security

- API keys are stored in memory by default (not persisted)
- Optional encrypted storage with user passphrase
- "Panic lock" feature to clear credentials instantly
- All requests include traceable `x-request-id` headers

**Never commit your API keys to the repository.**

## License

This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details.

## Disclaimer

This software is for educational and informational purposes only. It is not financial advice. Trading involves risk, and you should only trade with money you can afford to lose. The authors are not responsible for any trading losses.

## Support

- [Report a Bug](https://github.com/yourusername/etoro-terminal/issues)
- [Request a Feature](https://github.com/yourusername/etoro-terminal/issues)
- [Documentation](docs/)

---

Built with ❤️ for pro traders
